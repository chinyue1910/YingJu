(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],u=0,d=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,i=1;i<n.length;i++){var r=n[i];0!==a[r]&&(s=!1)}s&&(o.splice(e--,1),t=l(l.s=n[0]))}return t}var s={},i={app:0},a={app:0},o=[];function r(t){return l.p+"js/"+({about:"about",contact:"contact",login:"login",manager:"manager",member:"member",news:"news",product:"product",sign:"sign"}[t]||t)+"."+{about:"3e35e64b",contact:"014989c9",login:"a2501851",manager:"94aae618",member:"af677bb1",news:"ab6035a5",product:"70dd1020",sign:"99b68206"}[t]+".js"}function l(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n={about:1,product:1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var s="css/"+({about:"about",contact:"contact",login:"login",manager:"manager",member:"member",news:"news",product:"product",sign:"sign"}[t]||t)+"."+{about:"0d9171ac",contact:"31d6cfe0",login:"31d6cfe0",manager:"31d6cfe0",member:"31d6cfe0",news:"31d6cfe0",product:"6ac4ec36",sign:"31d6cfe0"}[t]+".css",a=l.p+s,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var c=o[r],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===s||u===a))return e()}var d=document.getElementsByTagName("style");for(r=0;r<d.length;r++){c=d[r],u=c.getAttribute("data-href");if(u===s||u===a)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var s=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=s,delete i[t],m.parentNode.removeChild(m),n(o)},m.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){i[t]=0})));var s=a[t];if(0!==s)if(s)e.push(s[2]);else{var o=new Promise((function(e,n){s=a[t]=[e,n]}));e.push(s[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=r(t);var d=new Error;c=function(e){u.onerror=u.onload=null,clearTimeout(m);var n=a[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",d.name="ChunkLoadError",d.type=s,d.request=i,n[1](d)}a[t]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=s,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(n,s,function(e){return t[e]}.bind(null,s));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var m=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"114e":function(t,e,n){t.exports=n.p+"img/home5.a4042e41.jpg"},"43e4":function(t,e,n){t.exports=n.p+"img/home3.fa0faef8.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var s=n("2b0e"),i=n("5f5b"),a=n("b1e0");n("ab8b"),n("2dd8");s["default"].use(i["a"]),s["default"].use(a["a"]);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[0==t.opacity?n("vs-icon",{style:{display:t.navshow},attrs:{id:"bigNav",icon:"menu"},on:{click:t.showContent}}):t._e(),n("keep-alive",[n("router-view",{ref:"childMethod",style:{filter:"blur("+t.blur+"px)"},attrs:{fullwidth:t.fullwidth},on:{changenavshow:t.changenavshow,showContent:t.showContent}})],1),n("navbarContent",{style:{opacity:t.opacity,visibility:t.visibility},attrs:{show:t.show},on:{closeContent:t.closeContent}})],1)},r=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0",attrs:{id:"navbarContent",fluid:""}},[n("transition",{attrs:{"enter-active-class":"animate__animated animate__rotateIn","leave-active-class":"animate__animated animate__rotateOut"}},[t.show?n("vs-icon",{style:{fontSize:"3rem"},attrs:{icon:"close",color:"white"},on:{click:function(e){return t.$emit("closeContent")}}}):t._e()],1),n("b-row",{staticClass:"h-100"},[n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/"},on:{click:t.backtohome}},[n("img",{staticClass:"mr-3",attrs:{src:t.src}}),t._v("回首頁")]):t._e()],1),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/news"},on:{click:function(e){return t.$emit("closeContent")}}},[t._v("最新消息")]):t._e()],1),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/about"},on:{click:function(e){return t.$emit("closeContent")}}},[t._v("香菇故事")]):t._e()],1),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/product"},on:{click:function(e){return t.$emit("closeContent")}}},[t._v("商品介紹")]):t._e()],1),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/member/profile"},on:{click:function(e){return t.$emit("closeContent")}}},[t._v("會員專區")]):t._e()],1),n("transition",{attrs:{"enter-active-class":"animate__animated animate__fadeInUp animate__delay-1s"}},[t.show?n("b-link",{attrs:{to:"/contact"},on:{click:function(e){return t.$emit("closeContent")}}},[t._v("意見回饋")]):t._e()],1)],1)],1)},c=[],u=n("9d64"),d=n.n(u),m={props:{show:Boolean},data:function(){return{src:d.a}},methods:{backtohome:function(){this.$bus.$emit("transform"),this.$emit("closeContent")}}},f=m,p=n("2877"),b=Object(p["a"])(f,l,c,!1,null,null,null),h=b.exports,g={components:{navbarContent:h},data:function(){return{opacity:0,visibility:"hidden",blur:0,show:!1,navshow:"block",fullwidth:0}},methods:{showContent:function(){this.opacity=.9,this.visibility="visible",this.blur=5,this.show=!this.show},closeContent:function(){this.opacity=0,this.visibility="hidden",this.blur=0,this.show=!this.show},changenavshow:function(){this.navshow="block"===this.navshow?"none":"block"},heartbeat:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/heartbeat").then((function(e){var n=e.data;t.user.length>0&&(n||(alert("登入時效已過"),t.$store.commit("logout"),"/"!==t.$route.path&&t.$router.push("/")))})).catch((function(e){alert(e),t.$store.commit("logout"),"/"!==t.$route.path&&t.$router.push("/")}))}},watch:{$route:function(t,e){this.navshow="Member"===t.meta.route||"Manager"===t.meta.route?"none":"block"}},mounted:function(){var t=this;this.fullwidth=window.innerWidth,window.onresize=function(){t.fullwidth=window.innerWidth},this.heartbeat(),setInterval((function(){t.heartbeat()}),3e5),window.fbAsyncInit=function(){window.FB.init({appId:"3109557419151059",cookie:!0,xfbml:!0,version:"v8.0"}),window.FB.AppEvents.logPageView()}},computed:{user:function(){return this.$store.getters.username}}},v=g,x=Object(p["a"])(v,o,r,!1,null,null,null),y=x.exports,w=n("9483");Object(w["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("d3b7"),n("96cf");var k=n("1da1"),_=n("8c4f"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[n("b-container",{staticClass:"px-0 h-100",attrs:{fluid:""}},[n("b-row",{staticClass:"h-100 flex-column flex-md-row flex-nowrap",attrs:{"no-gutters":""}},[n("b-col",{class:{"col-md-12":t.box.ishalf,"col-md-6":!t.box.ishalf},style:{background:"url("+t.box.src+") no-repeat center/cover"},attrs:{cols:"3"}},[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX animate__slow"}},[t.show?n("b-link",{class:{backdrop:t.isShow},attrs:{to:t.box.link}},[t._v(t._s(t.box.text))]):t._e()],1)],1),n("b-col",{staticClass:"d-flex flex-column",class:{"col-md-0":t.box.ishalf,"col-md-6":!t.box.ishalf},attrs:{cols:"12"}},[t._l(t.boxs,(function(e,s){return n("b-col",{key:s,class:{"col-md-12":e.isdivide,"col-md-6":!e.isthird,"col-md-4":!e.isforth},style:{background:"url("+e.src+") no-repeat center/cover"},attrs:{cols:"3"}},[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX animate__slow"}},[t.show?n("b-link",{class:{backdrop:t.isShow},attrs:{to:e.link}},[t._v(t._s(e.text))]):t._e()],1)],1)})),n("b-col",{staticClass:"d-flex flex-column flex-md-row",class:{"col-md-4":!t.box.isforth},attrs:{cols:"6"}},t._l(t.box1s,(function(e,s){return n("b-col",{key:s,class:{"col-md-12":e.isdivide},style:{background:"url("+e.src+") no-repeat center/cover"},attrs:{cols:"6"}},[n("transition",{attrs:{"enter-active-class":"animate__animated animate__flipInX animate__slow"}},[t.show?n("b-link",{class:{backdrop:t.isShow},attrs:{to:e.link}},[t._v(t._s(e.text))]):t._e()],1)],1)})),1)],2)],1)],1)],1)},$=[],j=(n("a9e3"),n("92f2")),I=n.n(j),B=n("59d2"),D=n.n(B),O=n("43e4"),T=n.n(O),E=n("9019"),M=n.n(E),S=n("114e"),A=n.n(S),q={data:function(){return{box:{src:I.a,link:"/news",text:"最新消息",ishalf:!0},boxs:[{src:D.a,link:"/about",text:"菇菇故事",isdivide:!0,isthird:!0,isforth:!0},{src:T.a,link:"/product",text:"商品介紹",isdivide:!0,isthird:!0,isforth:!0}],box1s:[{src:M.a,link:"/member/profile",text:"會員專區",isdivide:!0},{src:A.a,link:"/contact",text:"意見回饋",isdivide:!0}],show:!1,isShow:!1}},props:{fullwidth:Number},mounted:function(){var t=this;this.$nextTick((function(){t.transform()}))},methods:{transform:function(){var t=this;setTimeout((function(){t.show=!0}),1e3),setTimeout((function(){t.isShow=!0}),8e3),setTimeout((function(){t.box.ishalf=!(t.fullwidth>=768)}),4e3),setTimeout((function(){t.boxs[0].isdivide=!(t.fullwidth>=768),t.boxs[1].isdivide=!(t.fullwidth>=768),t.boxs[0].isthird=!(t.fullwidth>=768),t.boxs[1].isthird=!(t.fullwidth>=768)}),5e3),setTimeout((function(){t.boxs[0].isforth=!(t.fullwidth>=768),t.boxs[1].isforth=!(t.fullwidth>=768),t.boxs[0].isthird=!t.boxs[0].isthird,t.boxs[1].isthird=!t.boxs[1].isthird}),6e3),setTimeout((function(){t.box1s[0].isdivide=!(t.fullwidth>=768),t.box1s[1].isdivide=!(t.fullwidth>=768)}),7e3)}},created:function(){var t=this;this.$bus.$on("transform",(function(e){t.transform(e)}))}},z=q,N=Object(p["a"])(z,C,$,!1,null,null,null),P=N.exports,F=n("2f62"),U=n("0e44");s["default"].use(F["a"]);var W=new F["a"].Store({state:{user:{username:"",userID:"",userAccount:""}},mutations:{adduser:function(t,e){t.user={username:e[0],userAccount:e[1],userID:e[2]}},logout:function(t){t.user={username:"",userAccount:"",userID:""}}},getters:{username:function(t){return t.user.username},userAccount:function(t){return t.user.userAccount},userID:function(t){return t.user.userID}},actions:{},modules:{},plugins:[Object(U["a"])()]}),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"profile"}},[n("b-container",{staticClass:"h-100",attrs:{fluid:""}},[n("b-row",{staticClass:"align-items-center align-items-xl-end personal"},[n("b-col",{staticClass:"text-center"},[n("h3",[t._v("個人資訊")]),n("h6",[t._v("管理你的檔案以保護你的帳戶")])])],1),n("b-row",{staticClass:"detail flex-column flex-xl-row flex-nowrap align-items-center justify-content-around m-0"},[n("b-col",{staticClass:"size text-center d-flex flex-column align-items-center justify-content-center",attrs:{xl:"4"}},[n("img-inputer",{staticClass:"h-100 w-100",style:{maxWidth:"30vh",minHeight:"30vh",height:"30vh",borderRadius:"50%",overflow:"hidden"},attrs:{"no-mask":"","img-src":t.src,theme:"light",accept:"image/*","max-size":1024,placeholder:"請選擇或拖曳圖片至此",icon:"img"},on:{onChange:t.upload,onExceed:t.exceed},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),n("b-col",{staticClass:"size",attrs:{xl:"8"}},[n("vs-popup",{staticClass:"holamundo",attrs:{title:"個人資訊",active:t.edit,"button-close-hidden":""},on:{"update:active":function(e){t.edit=e},close:t.bringback}},[n("b-form",{staticClass:"d-flex flex-column w-100 justify-content-center",on:{submit:t.submit}},[t._l(t.boxs.inputs,(function(e,s){return n("b-form-group",{key:s,staticClass:"w-100",attrs:{label:e.label,"label-for":e.id,"label-cols":"2","label-class":"text-center"}},[n("b-form-input",{attrs:{type:e.type,id:e.id,required:e.required,state:e.state},model:{value:e.model,callback:function(n){t.$set(e,"model",n)},expression:"input.model"}})],1)})),n("b-row",{staticClass:"m-0 justify-content-center"},[n("b-button",{staticClass:"mr-1",attrs:{variant:"success",type:"submit",disabled:t.disabled}},[t._v("送出")]),n("b-button",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:t.cancel}},[t._v("取消")])],1)],2)],1),t._l(t.boxs.inputs,(function(e,s){return n("b-row",{key:s,staticClass:"py-3"},[n("b-col",{staticClass:"text-success text-center"},[t._v(t._s(e.label))]),n("b-col",[t._v(t._s(0===e.initial.length?"尚未有地址資訊":e.initial.length>10?e.initial.substr(0,10)+"...":e.initial))])],1)})),n("b-row",{staticClass:"py-3"},[n("b-col",{staticClass:"text-success text-center"},[t._v(t._s(void 0===t.boxs.email?"":t.boxs.email.label))]),n("b-col",[t._v(t._s(void 0===t.boxs.email?"":t.boxs.email.initial))])],1),n("b-row",{staticClass:"justify-content-center my-5"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(e){t.edit=!0}}},[t._v("更改資料")])],1)],2)],1)],1)],1)},H=[],V=(n("caad"),n("b0c0"),n("2532"),n("b85c")),R={data:function(){return{edit:!1,disabled:!1,boxs:[],file:null}},methods:{exceed:function(){this.$vs.notify({title:"檔案大小不能超過 1 MB",color:"danger",icon:"close"})},upload:function(){var t=this;if(null===this.file||this.file.size>=1048576||!this.file.type.includes("image"))this.$vs.notify({title:"檔案格式不符",color:"danger",icon:"close"});else{var e=new FormData;e.append("image",this.file),this.axios.post("https://yingju.herokuapp.com/profile/image/"+this.userID,e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var n=e.data.resultnew;t.$vs.notify({title:"圖片更改成功",color:"success",icon:"done"}),t.$bus.$emit("sendsrc",n.src)})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}},submit:function(t){var e=this;t.preventDefault(),this.axios.patch("https://yingju.herokuapp.com/profile/"+this.userID,this.form).then((function(t){if(t.data.success){var n=t.data.result;e.boxs={inputs:[{type:"text",label:"姓名",id:"name",model:n.name,initial:n.name,state:null,required:!0},{type:"tel",label:"電話",id:"tel",model:n.tel,initial:n.tel,state:null,required:!0},{type:"text",label:"地址",id:"address",model:n.address,initial:n.address,required:!1}],email:{label:"E-mail",id:"4",initial:n.account},src:n.src},e.$store.commit("adduser",[n.name,n.account,n._id]),e.$swal({title:"修改成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}})).catch((function(t){e.$swal({title:t.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})})),this.edit=!1},cancel:function(){this.edit=!1;var t,e=Object(V["a"])(this.boxs.inputs);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.model=n.initial}}catch(s){e.e(s)}finally{e.f()}},bringback:function(){var t,e=Object(V["a"])(this.boxs.inputs);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.model=n.initial}}catch(s){e.e(s)}finally{e.f()}}},computed:{form:function(){return void 0!==this.boxs.inputs?{name:this.boxs.inputs[0].model,tel:this.boxs.inputs[1].model,address:this.boxs.inputs[2].model}:""},userID:function(){return this.$store.getters.userID},src:function(){var t="https://yingju.herokuapp.com/profile/image/"+this.boxs.src;return void 0===this.boxs.src?null:this.boxs.src.includes("http")?this.boxs.src:t}},watch:{form:{deep:!0,handler:function(t){var e=/^09/;this.boxs.inputs[0].state=0!==t.name.length,this.boxs.inputs[1].state=0===t.tel.length?null:e.test(t.tel)&&10===t.tel.length,this.disabled=!this.boxs.inputs[0].state||!this.boxs.inputs[1].state}}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/profile/"+this.userID).then((function(e){var n=e.data.result[0];t.boxs={inputs:[{type:"text",label:"姓名",id:"name",model:n.name,initial:n.name,state:null,required:!0},{type:"tel",label:"電話",id:"tel",model:n.tel,initial:n.tel,state:null,required:!0},{type:"text",label:"地址",id:"address",model:n.address,initial:n.address,required:!1}],email:{label:"E-mail",id:"account",initial:n.account},src:n.src},console.log(t.boxs)})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}},X=R,J=Object(p["a"])(X,L,H,!1,null,null,null),K=J.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"cart"}},[n("b-container",{staticClass:"h-100",attrs:{fluid:""}},[n("b-row",{staticClass:"align-items-center align-items-lg-end personal"},[n("b-col",{staticClass:"text-center"},[n("h3",[t._v("購物清單")]),n("h6",[t._v("查看及購買")])])],1),n("b-row",{staticClass:"bg-light mb-5"},[n("b-table",{attrs:{"show-empty":"",stacked:"md",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(product)",fn:function(e){return[n("b-col",{attrs:{cols:"12",sm:"10",md:"6"}},[n("img",{attrs:{src:e.item.src}})]),n("b-col",{staticClass:"mt-3 mt-md-0 text-success",style:{fontSize:"1.2rem",wordBreak:"break-word"},attrs:{cols:"12",md:"4"}},[t._v(t._s(e.value))])]}},{key:"cell(price)",fn:function(e){return[t._v(t._s(e.value))]}},{key:"cell(count)",fn:function(e){return[n("vs-input-number",{attrs:{max:e.item.max,min:"0"},on:{input:function(n){return t.show([n,e.item])}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"row.value"}})]}},{key:"cell(total)",fn:function(e){return[t._v(t._s(e.item.price*e.item.count))]}},{key:"cell(actions)",fn:function(e){return[n("b-button",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(n){return t.remove(e.index)}}},[t._v("刪除")])]}},{key:"empty",fn:function(e){return[n("b-link",{staticClass:"text-center",style:{display:"block"},attrs:{to:"/product"}},[t._v("跟著我去逛逛其他商品吧")])]}}])})],1),n("b-row",{staticClass:"justify-content-center m-0 align-items-center"},[n("h4",{staticClass:"mb-0"},[t._v("購買總金額：")]),n("h3",{staticClass:"text-danger mb-0"},[t._v("$"+t._s(t.totalprice))]),n("b-btn",{staticClass:"ml-3",attrs:{variant:"warning",disabled:0===t.totalprice},on:{click:function(e){t.popupActivo=!0}}},[t._v("立即下訂")])],1)],1),n("vs-popup",{staticClass:"holamundo",attrs:{title:"確認下訂",active:t.popupActivo,"button-close-hidden":""},on:{"update:active":function(e){t.popupActivo=e}}},[n("b-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("h3",[t._v("您的訂單總金額為")])]),n("b-col",{staticClass:"text-center my-5",attrs:{cols:"12"}},[n("h1",[t._v("$ "+t._s(t.totalprice))])]),n("b-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("b-button",{staticClass:"mr-1",attrs:{variant:"success",size:"lg"},on:{click:t.submit}},[t._v("送出")]),n("b-button",{staticClass:"ml-1",attrs:{variant:"danger",size:"lg"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},G=[],Q=(n("d81d"),{data:function(){return{items:[],value:123,fields:[{key:"product",label:"商品",class:"text-center align-middle flexItem"},{key:"price",label:"單價",class:"text-center align-middle"},{key:"count",label:"數量",class:"text-center align-middle"},{key:"total",label:"總計",class:"text-center align-middle"},{key:"actions",label:"操作",class:"text-center align-middle"}],popupActivo:!1}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/profile/"+this.userID).then((function(e){t.items=e.data.result[0].cart.map((function(t){return{src:t.src,product:t.product,price:t.price,count:t.count,id:t.id,max:null}}))})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))},computed:{userID:function(){return this.$store.getters.userID},totalprice:function(){var t,e=0,n=Object(V["a"])(this.items);try{for(n.s();!(t=n.n()).done;){var s=t.value;e+=s.price*s.count}}catch(i){n.e(i)}finally{n.f()}return e}},methods:{changeCart:function(t){this.items=t;var e,n=Object(V["a"])(this.items);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.max=null}}catch(i){n.e(i)}finally{n.f()}},show:function(t){t[1].count=parseInt(t[0])},submit:function(){var t=this;if(0===this.items.length)this.$vs.notify({title:"請先選購商品",color:"danger",icon:"close"});else{var e=this.items.map((function(t){return{product:t.product,count:t.count,id:t.id}}));e.push({totalprice:this.totalprice},{userId:this.userID}),this.axios.post("https://yingju.herokuapp.com/order/"+this.userID,e).then((function(e){e.data.success&&(t.items=[],t.popupActivo=!1,t.$swal({title:"訂單已送出",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}))})).catch((function(e){t.popupActivo=!1,t.$swal({title:e.response.data.message.status,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}),"商品庫存不足"===e.response.data.message.status&&t.axios.get("https://yingju.herokuapp.com/product").then((function(n){for(var s in t.items)t.items[s].max=e.response.data.message.product[s].storage,t.items[s].count=t.items[s].count>e.response.data.message.product[s].storage?e.response.data.message.product[s].storage:t.items[s].count}))}))}},cancel:function(){this.popupActivo=!1},remove:function(t){var e=this;this.axios.patch("https://yingju.herokuapp.com/cart/"+this.userID,{index:t}).then((function(t){e.items=t.data.result.cart.map((function(t){return{src:t.src,product:t.product,price:t.price,count:t.count}}))})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))}},created:function(){var t=this;this.$bus.$on("addCart",(function(e){t.changeCart(e)}))}}),Z=Q,tt=Object(p["a"])(Z,Y,G,!1,null,null,null),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"privacy"}},[n("b-container",{staticClass:"h-100"},[n("b-row",{staticClass:"align-items-center align-items-lg-end personal"},[n("b-col",{staticClass:"text-center"},[n("h3",[t._v("隱私資訊")]),n("h6",[t._v("為了保護你帳號的安全，請不要分享你的密碼給其他人")])])],1),n("b-row",{staticClass:"h-50"},[n("b-col",[n("b-form",{staticClass:"h-100 d-flex flex-column justify-content-center align-items-center",on:{submit:t.submit}},[t._l(t.inputs,(function(e,s){return n("b-form-group",{key:s,staticClass:"w-50",attrs:{label:e.label,"label-for":"input-"+e.id}},[n("b-form-input",{attrs:{required:"",id:"input-"+e.id,type:"password",state:e.state},model:{value:e.model,callback:function(n){t.$set(e,"model",n)},expression:"item.model"}}),n("b-form-invalid-feedback",{attrs:{state:e.state}},[t._v(t._s(e.warning))])],1)})),n("b-btn",{attrs:{type:"submit",variant:"success",disabled:t.disabled}},[t._v("送出")])],2)],1)],1)],1)],1)},st=[],it={data:function(){return{inputs:[{label:"舊的密碼",id:"1",model:""},{label:"新密碼",id:"2",model:"",state:null,warning:"密碼字數少於 6 字元"},{label:"密碼確認",id:"3",model:"",state:null,warning:"輸入密碼與上面不符"}]}},methods:{submit:function(t){var e=this;t.preventDefault(),this.axios.patch("https://yingju.herokuapp.com/privacy/"+this.userID,this.form).then((function(t){if(t.data.success){var n,s=Object(V["a"])(e.inputs);try{for(s.s();!(n=s.n()).done;){var i=n.value;i.model=""}}catch(a){s.e(a)}finally{s.f()}e.$swal({title:"修改成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}})).catch((function(t){var n,s=Object(V["a"])(e.inputs);try{for(s.s();!(n=s.n()).done;){var i=n.value;i.model=""}}catch(a){s.e(a)}finally{s.f()}e.$swal({title:t.response.data.message,icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))}},computed:{disabled:function(){return this.form.password!==this.form.newconfirm||this.form.password.length<6},form:function(){return{old:this.inputs[0].model,password:this.inputs[1].model,newconfirm:this.inputs[2].model}},userID:function(){return this.$store.getters.userID}},watch:{form:{deep:!0,handler:function(t){this.inputs[1].state=0===t.password.length?null:t.password.length>=6,this.inputs[2].state=0===t.password.length&&0===t.newconfirm.length?null:t.password===t.newconfirm}}}},at=it,ot=Object(p["a"])(at,nt,st,!1,null,null,null),rt=ot.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"track"}},[n("b-container",{staticClass:"pt-5"},[n("b-table",{attrs:{items:t.items,fields:t.fields,stacked:"md","show-empty":"","thead-tr-class":"bg-info"},scopedSlots:t._u([{key:"cell(checkbox)",fn:function(e){return[t._v(t._s("completed"===e.value?"已送達":"sending"===e.value?"寄送中":"等待付款"))]}},{key:"cell(delete)",fn:function(e){return[n("b-button",{attrs:{variant:"danger",disabled:"waiting"!==e.item.checkbox},on:{click:function(n){return t.cancel([e.item._id,e.index])}}},[t._v("取消訂單")])]}},{key:"cell(order)",fn:function(e){return[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:e.toggleDetails}},[t._v(t._s(e.detailsShowing?"隱藏":"顯示")+"詳細資料")])]}},{key:"row-details",fn:function(e){return[n("b-table",{staticClass:"bg-light",attrs:{items:e.item.order,fields:t.fields2,"thead-tr-class":"bg-secondary"}})]}},{key:"empty",fn:function(e){return[n("h4",{staticClass:"text-center"},[t._v("目前還沒有任何訂單喔")])]}}])})],1)],1)},ct=[],ut=(n("a434"),{data:function(){return{items:[],fields:[{key:"_id",label:"訂單編號",sortable:!1,class:"text-center align-middle"},{key:"order",label:"訂單內容",sortable:!1,class:"text-center align-middle"},{key:"total",label:"總金額",sortable:!1,class:"text-center align-middle"},{key:"checkbox",label:"目前狀態",sortable:!1,class:"text-center align-middle"},{key:"delete",label:"動作",sortable:!1,class:"text-center align-middle"}],fields2:[{key:"product",label:"商品名稱",class:"text-center align-middle"},{key:"count",label:"數量",class:"text-center align-middle"}]}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/track/"+this.userID).then((function(e){t.items=e.data.result;var n,s=Object(V["a"])(t.items);try{for(s.s();!(n=s.n()).done;){var i=n.value;i._rowVariant="completed"===i.checkbox?"dark":"info"}}catch(a){s.e(a)}finally{s.f()}}))},computed:{userID:function(){return this.$store.getters.userID}},methods:{cancel:function(t){var e=this;this.$swal({title:"確定取消訂單嗎?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(n){n.value&&(e.axios.delete("https://yingju.herokuapp.com/track/"+t[0]),e.items.splice(t[1],1))}))}}}),dt=ut,mt=Object(p["a"])(dt,lt,ct,!1,null,null,null),ft=mt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"message"}},[n("b-container",{staticClass:"pt-5",attrs:{fluid:""}},[n("b-table",{attrs:{"show-empty":"",striped:"","empty-text":"目前沒有任何意見",items:t.items,fields:t.fields,stacked:"sm","thead-tr-class":"bg-info"},scopedSlots:t._u([{key:"cell(text)",fn:function(e){return[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:e.toggleDetails}},[t._v(t._s(e.detailsShowing?"隱藏":"顯示")+"詳細資料")])]}},{key:"row-details",fn:function(e){return[n("b-card",[t._v(t._s(e.item.text))])]}}])})],1)],1)},bt=[],ht=(n("fb6a"),{data:function(){return{items:[],fields:[{key:"name",label:"姓名",sortable:!1,class:"text-center align-middle"},{key:"tel",label:"電話",sortable:!1,class:"text-center align-middle"},{key:"email",label:"E-Mail",sortable:!1,class:"text-center align-middle"},{key:"text",label:"意見",sortable:!1,class:"text-center align-middle"},{key:"content",label:"時間",sortable:!0,class:"text-center align-middle"}]}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/message").then((function(e){var n,s=e.data.result,i=Object(V["a"])(s);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.time=parseInt((Date.now()-a.time)/1e3);a.content=o<60?"剛剛":o>=60&&o<3600?Math.floor(o/60)+"分鐘前":o>=3600&&o<86400?Math.floor(o/3600)+"小時前":o>=86400&&o<2592e3?Math.floor(o/86400)+"天前":o>=2592e3&&o<31104e3?Math.floor(o/2592e3)+"個月前":"超過一個月前"}}catch(r){i.e(r)}finally{i.f()}t.items=s.slice().reverse()})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}}),gt=ht,vt=Object(p["a"])(gt,pt,bt,!1,null,null,null),xt=vt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"article"}},[n("b-container",{staticClass:"pt-3"},[n("b-row",[n("b-form",{staticClass:"w-100 d-flex flex-wrap justify-content-center",on:{submit:t.submit}},[n("b-col",{staticClass:"d-lg-flex",attrs:{cols:"12"}},[n("b-col",[n("b-form-group",{attrs:{label:"標題","label-for":"title",state:t.state}},[n("b-form-input",{attrs:{id:"title",required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),n("b-col",[n("b-form-group",{attrs:{label:"類別","label-for":"type"}},[n("b-form-select",{attrs:{id:"type",options:t.options,required:""},model:{value:t.form.select,callback:function(e){t.$set(t.form,"select",e)},expression:"form.select"}})],1)],1)],1),n("b-col",{staticClass:"py-3 d-flex flex-wrap",attrs:{cols:"12"}},[n("b-col",{staticClass:"py-3",attrs:{cols:"12",sm:"6"}},[n("img-inputer",{staticClass:"h-100 w-100",style:{maxWidth:"100%",minHeight:"150px"},attrs:{"no-mask":"",theme:"light",accept:"image/*","max-size":1024,placeholder:"請選擇或拖曳圖片至此",icon:"img"},model:{value:t.form.file,callback:function(e){t.$set(t.form,"file",e)},expression:"form.file"}})],1),n("b-col",{attrs:{cols:"12",sm:"6"}},[n("b-form-group",{attrs:{label:"內容詳情","label-for":"description"}},[n("b-form-textarea",{attrs:{id:"description",rows:"6","max-rows":"6",required:""},model:{value:t.form.text,callback:function(e){t.$set(t.form,"text",e)},expression:"form.text"}})],1)],1)],1),n("b-col",{attrs:{cols:"12"}},[n("b-button",{staticClass:"w-100",style:{flexBasis:"70px"},attrs:{type:"submit",variant:"success"}},[t._v("發文")])],1)],1)],1)],1),n("b-container",[n("b-row",{staticClass:"flex-column"},t._l(t.boxs,(function(e,s){return n("b-col",{key:s,staticClass:"p-3 mb-3",style:{maxWidth:"100%"}},[n("div",{staticClass:"d-flex flex-wrap justify-content-between",style:{border:"10px solid rgba(0,0,0,0.5)"}},[n("b-col",{staticClass:"carditem px-0",attrs:{cols:"12",md:"4"}},[n("b-img",{attrs:{src:e.src}})],1),n("b-col",{staticClass:"carditem d-flex flex-column justify-content-around",attrs:{cols:"12",md:"7"}},[n("vs-popup",{staticClass:"holamundo",attrs:{title:"商品資訊",active:e.edit,"button-close-hidden":""},on:{close:function(n){return t.bringback(e)},"update:active":function(n){return t.$set(e,"edit",n)}}},[n("b-form",{staticClass:"w-100 text-center",on:{submit:function(n){return n.preventDefault(),t.submitItem(e)}}},[n("b-form-group",{attrs:{label:"標題","label-for":"changeTitle","label-cols":"2"}},[n("b-form-input",{attrs:{id:"changeTitle",required:"",type:"text"},model:{value:e.title.model,callback:function(n){t.$set(e.title,"model",n)},expression:"box.title.model"}})],1),n("b-form-group",{attrs:{label:"內容詳情","label-for":"changeText","label-cols":"2"}},[n("b-form-textarea",{attrs:{id:"changeText",required:""},model:{value:e.text.model,callback:function(n){t.$set(e.text,"model",n)},expression:"box.text.model"}})],1),n("b-form-group",{attrs:{label:"類別","label-for":"changeTag","label-cols":"2"}},[n("b-form-select",{attrs:{id:"changeTag",required:"",options:t.options},model:{value:e.tag.model,callback:function(n){t.$set(e.tag,"model",n)},expression:"box.tag.model"}})],1),n("b-row",{staticClass:"m-0 justify-content-center"},[n("b-button",{staticClass:"mr-1",attrs:{variant:"success",type:"submit"}},[t._v("送出")]),n("b-button",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(n){return t.cancel(e)}}},[t._v("取消")])],1)],1)],1),n("div",{staticClass:"row m-0"},[n("h3",{staticClass:"mr-auto",style:{color:"darkgreen"}},[t._v(t._s(e.title.detail))]),n("h6",[t._v(t._s(e.tag.detail))])]),n("p",{staticClass:"mt-3"},[t._v(t._s(e.text.detail))]),n("b-row",{staticClass:"justify-content-center"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(n){return t.edit(e)}}},[t._v("更改資料")]),n("b-button",{staticClass:"ml-3",attrs:{variant:"danger"},on:{click:function(e){return t.deleteitem(s)}}},[t._v("刪除貼文")])],1)],1)],1)])})),1)],1)],1)},wt=[],kt={data:function(){return{form:{file:null,text:"",title:"",select:null},boxs:[],state:null,options:[{text:"請選擇類別",value:null},{text:"活動",value:"活動"},{text:"促銷",value:"促銷"},{text:"資訊",value:"資訊"},{text:"限時優惠",value:"限時優惠"},{text:"公告",value:"公告"}]}},methods:{edit:function(t){t.edit=!0},cancel:function(t){t.edit=!1},bringback:function(t){var e,n=Object(V["a"])(this.box.inputs);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.model=s.detail}}catch(i){n.e(i)}finally{n.f()}},submit:function(t){var e=this;t.preventDefault();var n=new Date;if(null===this.form.file||this.form.file.size>=1048576||!this.form.file.type.includes("image"))this.$vs.notify({title:"檔案格式不符",color:"danger",icon:"close"});else{var s=new FormData,i=n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1),a=n.getDate()>9?n.getDate():"0"+n.getDate();s.append("image",this.form.file),s.append("title",this.form.title),s.append("text",this.form.text),s.append("time",n.getFullYear()+"/"+i+"/"+a),s.append("tag",this.form.select),this.axios.post("https://yingju.herokuapp.com/article",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var n=t.data.result;e.boxs.push({edit:!1,id:n._id,src:"https://yingju.herokuapp.com/article/"+n.name,time:n.time,title:{detail:n.title,model:n.title},text:{detail:n.text,model:n.text},tag:{detail:n.tag,model:n.tag}}),e.form.file=null,e.form.text="",e.form.title="",e.form.select=null,e.$vs.notify({title:"消息發布成功",color:"success",icon:"done"})})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))}},submitItem:function(t){var e=this,n={title:t.title.model,text:t.text.model,tag:t.tag.model};console.log(n),this.axios.patch("https://yingju.herokuapp.com/article/"+t.id,n).then((function(n){if(n.data.success){var s=n.data.result;t.title.detail=s.title,t.text.detail=s.text,t.tag.detail=s.detail,t.edit=!1,e.$vs.notify({title:"商品更改已保存",color:"success",icon:"done"})}})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))},deleteitem:function(t){var e=this;this.axios.delete("https://yingju.herokuapp.com/article/"+this.boxs[t].id).then((function(n){n.data.success&&(e.boxs.splice(t,1),e.$vs.notify({title:"貼文已刪除",color:"success",icon:"done"}))})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/article").then((function(e){t.boxs=e.data.result.map((function(t){return{edit:!1,id:t._id,src:"https://yingju.herokuapp.com/article/"+t.name,time:t.time,title:{detail:t.title,model:t.title},text:{detail:t.text,model:t.text},tag:{detail:t.tag,model:t.tag}}}))})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}},_t=kt,Ct=Object(p["a"])(_t,yt,wt,!1,null,null,null),$t=Ct.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"display"}},[n("b-container",{staticClass:"pt-3"},[n("b-row",[n("b-form",{staticClass:"w-100 d-flex flex-wrap justify-content-center",on:{submit:t.submit}},[n("b-col",{staticClass:"d-lg-flex",attrs:{cols:"12"}},t._l(t.formdata,(function(e,s){return n("b-col",{key:s},[n("b-form-group",{attrs:{label:e.label,"label-for":e.id,state:e.state}},[n("b-form-input",{attrs:{id:e.id,required:""},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"box.text"}})],1)],1)})),1),n("b-col",{staticClass:"py-3 d-flex flex-wrap",attrs:{cols:"12"}},[n("b-col",{staticClass:"py-3",attrs:{cols:"12",sm:"6"}},[n("img-inputer",{staticClass:"h-100 w-100",style:{maxWidth:"100%",minHeight:"150px"},attrs:{"no-mask":"",theme:"light",accept:"image/*","max-size":1024,placeholder:"請選擇或拖曳圖片至此",icon:"img"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),n("b-col",{attrs:{cols:"12",sm:"6"}},[n("b-form-group",{attrs:{label:"商品詳情","label-for":"description"}},[n("b-form-textarea",{attrs:{id:"description",rows:"6","max-rows":"6"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1)],1),n("b-col",{attrs:{cols:"12"}},[n("b-button",{staticClass:"w-100",style:{flexBasis:"70px"},attrs:{type:"submit",variant:"success"}},[t._v("新增")])],1)],1)],1)],1),n("b-container",[n("b-row",{staticClass:"flex-column"},t._l(t.boxs,(function(e,s){return n("b-col",{key:s,staticClass:"p-3 mb-3",style:{maxWidth:"100%"}},[n("div",{staticClass:"d-flex flex-wrap justify-content-between",style:{border:"10px solid rgba(0,0,0,0.5)"}},[n("b-col",{staticClass:"carditem px-0",attrs:{cols:"12",md:"4"}},[n("b-img",{attrs:{src:e.src}})],1),n("b-col",{staticClass:"carditem d-flex flex-column justify-content-around",attrs:{cols:"12",md:"7"}},[n("vs-popup",{staticClass:"holamundo",attrs:{title:"商品資訊",active:e.edit,"button-close-hidden":""},on:{close:function(n){return t.bringback(e)},"update:active":function(n){return t.$set(e,"edit",n)}}},[n("b-form",{staticClass:"w-100 text-center",on:{submit:function(n){return n.preventDefault(),t.submitItem(e)}}},[t._l(e.inputs,(function(e,i){return n("b-form-group",{key:i,attrs:{label:e.label,"label-for":e.id+s,"label-cols":"2"}},[n("b-form-input",{attrs:{id:e.id+s,required:"",type:e.type},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"input.text"}})],1)})),n("b-form-group",{attrs:{label:e.description.label,"label-for":e.description.id+s,"label-cols":"2"}},[n("b-form-textarea",{attrs:{id:e.description.id+s,required:""},model:{value:e.description.text,callback:function(n){t.$set(e.description,"text",n)},expression:"box.description.text"}})],1),n("b-row",{staticClass:"m-0 justify-content-center"},[n("b-button",{staticClass:"mr-1",attrs:{variant:"success",type:"submit"}},[t._v("送出")]),n("b-button",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:function(n){return t.cancel(e)}}},[t._v("取消")])],1)],2)],1),t._l(t.boxs[s].inputs,(function(e,s){return n("b-row",{key:s,staticClass:"py-3 mx-3"},[n("b-col",{staticClass:"text-success",style:{flex:"0 0 80px"}},[t._v(t._s(e.label))]),n("b-col",[t._v(t._s(e.detail))])],1)})),n("b-row",{staticClass:"py-3 mx-3"},[n("b-col",{staticClass:"text-success",style:{flex:"0 0 80px"}},[t._v(t._s(e.description.label))]),n("b-col",{staticClass:"text-break"},[t._v(t._s(e.description.detail.substr(0,100)+"..."))])],1),n("b-row",{staticClass:"justify-content-center"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(n){return t.edit(e)}}},[t._v("更改資料")]),n("b-button",{staticClass:"ml-3",attrs:{variant:"danger"},on:{click:function(e){return t.deleteitem(s)}}},[t._v("刪除商品")])],1)],2)],1)])})),1)],1)],1)},It=[],Bt=(n("a4d3"),n("e01a"),{data:function(){return{file:null,description:"",formdata:[{label:"品名",id:"item",state:null,text:""},{label:"價格",id:"price",state:null,text:""},{label:"存貨",id:"storage",state:null,text:""}],boxs:[]}},methods:{submit:function(t){var e=this;if(t.preventDefault(),null===this.file||this.file.size>=1048576||!this.file.type.includes("image"))this.$vs.notify({title:"檔案格式不符",color:"danger",icon:"close"});else{var n=new FormData;n.append("image",this.file),n.append("item",this.formdata[0].text),n.append("price",this.formdata[1].text),n.append("storage",this.formdata[2].text),n.append("description",this.description),this.axios.post("https://yingju.herokuapp.com/product",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var n=t.data.result;e.boxs.push({edit:!1,id:n._id,src:"https://yingju.herokuapp.com/product/"+n.name,inputs:[{label:"品名",type:"text",id:"item",detail:n.item,text:n.item},{label:"價格",type:"number",id:"price",detail:n.price,text:n.price},{label:"存貨",type:"number",id:"storage",detail:n.storage,text:n.storage}],description:{label:"描述",id:"description",detail:n.description,text:n.description}}),e.$vs.notify({title:"商品新增成功",color:"success",icon:"done"});var s,i=Object(V["a"])(e.formdata);try{for(i.s();!(s=i.n()).done;){var a=s.value;a.text=""}}catch(o){i.e(o)}finally{i.f()}e.description="",e.file=null})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))}},submitItem:function(t){var e=this,n={item:t.inputs[0].text,price:t.inputs[1].text,storage:t.inputs[2].text,description:t.description.text};this.axios.patch("https://yingju.herokuapp.com/product/"+t.id,n).then((function(n){if(n.data.success){var s=n.data.result;t.inputs[0].detail=s.item,t.inputs[1].detail=s.price,t.inputs[2].detail=s.storage,t.description.detail=s.description,t.edit=!1,e.$vs.notify({title:"商品更改已保存",color:"success",icon:"done"})}})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))},deleteitem:function(t){var e=this;this.axios.delete("https://yingju.herokuapp.com/product/"+this.boxs[t].id).then((function(n){n.data.success&&(e.boxs.splice(t,1),e.$vs.notify({title:"商品已下架",color:"success",icon:"done"}))})).catch((function(t){e.$vs.notify({title:t.response.data.message,color:"danger",icon:"close"})}))},edit:function(t){t.edit=!0},cancel:function(t){t.edit=!1;var e,n=Object(V["a"])(t.inputs);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.text=s.detail}}catch(i){n.e(i)}finally{n.f()}},bringback:function(t){var e,n=Object(V["a"])(t.inputs);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.text=s.detail}}catch(i){n.e(i)}finally{n.f()}}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/product").then((function(e){t.boxs=e.data.result.map((function(t){return{edit:!1,id:t._id,src:"https://yingju.herokuapp.com/product/"+t.name,inputs:[{label:"品名",type:"text",id:"item",detail:t.item,text:t.item},{label:"價格",type:"number",id:"price",detail:t.price,text:t.price},{label:"存貨",type:"number",id:"storage",detail:t.storage,text:t.storage}],description:{label:"描述",id:"description",detail:t.description,text:t.description}}}))})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}}),Dt=Bt,Ot=Object(p["a"])(Dt,jt,It,!1,null,null,null),Tt=Ot.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white",attrs:{id:"membership"}},[n("b-container",{staticClass:"pt-5",attrs:{fluid:""}},[n("b-table",{attrs:{"show-empty":"","empty-text":"目前沒有任何會員",striped:"",stacked:"md",items:t.users,fields:t.fields,"thead-tr-class":"bg-info"},scopedSlots:t._u([{key:"cell(address)",fn:function(e){return[t._v(t._s(0===e.item.address.length?"沒有提供地址資訊":e.item.address))]}},{key:"cell(action)",fn:function(e){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(n){return t.cancel([e.item._id,e.index])}}},[t._v("刪除")])]}}])})],1)],1)},Mt=[],St={data:function(){return{users:[],fields:[{key:"name",label:"姓名",class:"text-center align-middle flexItem"},{key:"tel",label:"電話",class:"text-center align-middle"},{key:"account",label:"信箱",class:"text-center align-middle"},{key:"address",label:"地址",class:"text-center align-middle"},{key:"action",label:"操作",class:"text-center align-middle"}]}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/membership").then((function(e){t.users=e.data.resultNew})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))},methods:{cancel:function(t){var e=this;this.$swal({title:"是否確定刪除該帳號",icon:"question",confirmButtonColor:"#3085d6",confirmButtonText:"確定",showCancelButton:!0,cancelButtonColor:"#d33",cancelButtonText:"取消"}).then((function(n){n.value&&e.axios.delete("https://yingju.herokuapp.com/membership/"+t[0]).then((function(n){n.data.success&&(e.$swal({title:"帳號已刪除",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}),e.users.splice(t[1],1))})).catch((function(t){e.$swal({title:t.response.data.message,icon:"danger",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))}))}}},At=St,qt=Object(p["a"])(At,Et,Mt,!1,null,null,null),zt=qt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"order"}},[n("b-container",{staticClass:"pt-5"},[n("b-row",{staticClass:"mb-3 justify-content-end m-0"},[n("b-form-select",{style:{width:"auto"},attrs:{options:t.selectedoptions},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),n("b-button",{staticClass:"ml-3",attrs:{variant:"danger"},on:{click:t.save}},[t._v("保存")])],1),n("b-table",{attrs:{filter:t.filter,filterIncludedFields:["checkbox"],"show-empty":"","empty-text":"目前沒有任何訂單",items:t.items,fields:t.fields,stacked:"md","thead-tr-class":"bg-info"},scopedSlots:t._u([{key:"cell(order)",fn:function(e){return[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:e.toggleDetails}},[t._v(t._s(e.detailsShowing?"隱藏":"顯示")+"詳細資料")])]}},{key:"cell(checkbox)",fn:function(e){return[n("b-form-radio-group",{attrs:{options:t.options},model:{value:e.item.checkbox,callback:function(n){t.$set(e.item,"checkbox",n)},expression:"row.item.checkbox"}})]}},{key:"row-details",fn:function(e){return[n("b-table",{staticClass:"bg-light",attrs:{items:e.item.order,fields:t.fields2,"thead-tr-class":"bg-secondary"}})]}},{key:"emptyfiltered",fn:function(e){return[n("h5",{staticClass:"text-center text-danger"},[t._v("目前沒有任何此選項的內容")])]}}])})],1)],1)},Pt=[],Ft={data:function(){return{filter:null,items:[],fields:[{key:"name",label:"姓名",sortable:!1,class:"text-center align-middle"},{key:"tel",label:"手機",sortable:!1,class:"text-center align-middle"},{key:"order",label:"訂單內容",sortable:!1,class:"text-center align-middle"},{key:"total",label:"總金額",sortable:!0,class:"text-center align-middle"},{key:"checkbox",label:"目前狀態",sortable:!0,class:"text-center align-middle"}],fields2:[{key:"product",label:"商品名稱",class:"text-center align-middle"},{key:"count",label:"數量",class:"text-center align-middle"}],options:[{text:"等待匯款",value:"waiting"},{text:"寄送中",value:"sending"},{text:"已送達",value:"completed"}],selectedoptions:[{text:"請選擇過濾方式",value:null},{text:"等待付款",value:"waiting"},{text:"寄送中",value:"sending"},{text:"已送達",value:"completed"}]}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/order").then((function(e){t.items=e.data.result.map((function(t){return{name:t.name,tel:t.tel,order:t.order,total:t.total,checkbox:t.checkbox,_rowVariant:"completed"===t.checkbox?"dark":"info",userId:t.userId}})).slice().reverse()})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))},methods:{save:function(){var t=this;this.axios.patch("https://yingju.herokuapp.com/order",this.items.slice().reverse()).then((function(e){e.data.success&&(t.items=e.data.result.map((function(t){return{name:t.name,tel:t.tel,order:t.order,total:t.total,checkbox:t.checkbox,_rowVariant:"completed"===t.checkbox?"dark":"info",userId:t.userId}})).slice().reverse(),t.$swal({title:"保存成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}))})).catch((function(e){t.$swal({title:e.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))}}},Ut=Ft,Wt=Object(p["a"])(Ut,Nt,Pt,!1,null,null,null),Lt=Wt.exports;s["default"].use(_["a"]);var Ht=[{path:"/",name:"Home",component:P,meta:{login:!1,title:"映筑香菇農場"}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))},meta:{login:!1,title:"映筑香菇農場 | 香菇故事"}},{path:"/contact",name:"Contact",component:function(){return n.e("contact").then(n.bind(null,"b8fa"))},meta:{login:!1,title:"映筑香菇農場 | 意見回饋"}},{path:"/member",component:function(){return n.e("member").then(n.bind(null,"80d2"))},children:[{path:"profile",component:K,meta:{login:!0,title:"會員資料 |個人資訊",route:"Member"}},{path:"privacy",component:rt,meta:{login:!0,title:"會員資料 | 隱私資訊",route:"Member"}},{path:"track",component:ft,meta:{login:!0,title:"會員資料 | 購物追蹤",route:"Member"}},{path:"cart",component:et,meta:{login:!0,title:"會員資料 |購物清單",route:"Member"}}],meta:{login:!0,route:"Member"}},{path:"/manager",component:function(){return n.e("manager").then(n.bind(null,"1692"))},children:[{path:"message",component:xt,meta:{login:!0,title:"管理介面 | 用戶訊息",route:"Manager"}},{path:"order",component:Lt,meta:{login:!0,title:"管理介面 | 訂單管理",route:"Manager"}},{path:"display",component:Tt,meta:{login:!0,title:"管理介面 | 商品管理",route:"Manager"}},{path:"membership",component:zt,meta:{login:!0,title:"管理介面 | 會員管理",route:"Manager"}},{path:"article",component:$t,meta:{login:!0,title:"管理介面 | 發文管理",route:"Manager"}}],meta:{login:!0,route:"Manager"}},{path:"/news",name:"News",component:function(){return n.e("news").then(n.bind(null,"a2f9"))},meta:{login:!1,title:"映筑香菇農場 | 最新消息"}},{path:"/product",name:"Product",component:function(){return n.e("product").then(n.bind(null,"d2f1"))},meta:{login:!1,title:"映筑香菇農場 | 商品介紹"}},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"a55b"))},meta:{login:!1,title:"映筑香菇農場 | 用戶登入"}},{path:"/sign",name:"Sign",component:function(){return n.e("sign").then(n.bind(null,"1c4f"))},meta:{login:!1,title:"映筑香菇農場 | 用戶註冊"}}],Vt=new _["a"]({routes:Ht});Vt.beforeEach(function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(e,n,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.meta.login?0===W.state.user.userAccount.length?s("/login"):"manager@gmail.com"===W.state.user.userAccount&&"Manager"!==e.meta.route?"/manager/order"===n.path?s():s("/manager/order"):"manager@gmail.com"!==W.state.user.userAccount&&"Manager"===e.meta.route?s(n.path):s():s();case 1:case"end":return t.stop()}}),t)})));return function(e,n,s){return t.apply(this,arguments)}}()),Vt.afterEach((function(t,e){document.title=t.meta.title}));var Rt=_["a"].prototype.push;_["a"].prototype.push=function(t){return Rt.call(this,t).catch((function(t){return t}))};var Xt=Vt,Jt=n("fb9a"),Kt=n.n(Jt),Yt=(n("04f2"),n("f33e"),n("77ed")),Gt=n.n(Yt),Qt=n("f7ab"),Zt=n("ecee"),te=n("ad3d"),ee=n("c074"),ne=n("f2d1"),se=(n("c789"),n("bc3a")),ie=n.n(se),ae=n("a7fe"),oe=n.n(ae),re=n("657c"),le=(n("2bd9"),n("5886"));n("4413"),n("c006");ie.a.defaults.withCredentials=!0,Zt["c"].add(ee["e"],ee["f"],ee["i"],ee["b"],ee["a"],ee["h"],ee["g"],ee["d"],ee["c"],ee["k"],ne["a"],ne["b"],ee["j"],ne["c"]),s["default"].component("font-awesome-icon",te["a"]),s["default"].component("ImgInputer",re["a"]),s["default"].use(Gt.a),s["default"].use(Qt["a"]),s["default"].use(Kt.a),s["default"].use(oe.a,ie.a),s["default"].use(le["a"]),s["default"].prototype.$bus=new s["default"],s["default"].config.productionTip=!1,new s["default"]({router:Xt,store:W,render:function(t){return t(y)}}).$mount("#app")},"59d2":function(t,e,n){t.exports=n.p+"img/home2.17e5a90f.jpg"},9019:function(t,e,n){t.exports=n.p+"img/home4.c90d4c1e.jpg"},"92f2":function(t,e,n){t.exports=n.p+"img/home1.8b9bf1cd.jpg"},"9d64":function(t,e,n){t.exports=n.p+"img/logo.1fe09932.png"},c006:function(t,e){(function(t,e,n){var s,i=t.getElementsByTagName(e)[0];t.getElementById(n)||(s=t.createElement(e),s.id=n,s.src="https://connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(s,i))})(document,"script","facebook-jssdk")},f33e:function(t,e,n){}});
//# sourceMappingURL=app.e46bf017.js.map