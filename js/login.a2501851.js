(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"55fc":function(t,e,o){t.exports=o.p+"img/login.05533f09.jpg"},a55b:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{style:{background:"url("+t.img+") no-repeat fixed center/cover"},attrs:{id:"login"}},[o("b-container",{staticClass:"p-0 mx-1 mx-sm-auto",style:{background:"rgba(0,0,0,0.8)",borderRadius:"1rem"}},[o("b-row",{staticClass:"align-items-center justify-content-between m-0"},[o("b-col",{staticClass:"pb-5 pb-lg-0 d-flex flex-column align-items-center",attrs:{cols:"12",lg:"6"}},[o("font-awesome-icon",{attrs:{icon:["fas","user-circle"],size:"4x",color:"white"}}),o("b-form",{staticClass:"d-flex flex-column",on:{submit:t.submit}},[t._l(t.inputs,(function(e,s){return o("b-form-group",{key:s,attrs:{label:e.label,"label-for":e.id}},[o("b-form-input",{attrs:{id:e.id,type:e.type,required:"",placeholder:e.placeholder},model:{value:t.form[e.id],callback:function(o){t.$set(t.form,e.id,o)},expression:"form[item.id]"}})],1)})),o("b-btn",{staticClass:"mt-3 p-1",attrs:{variant:"success",type:"submit"}},[t._v("登入")]),o("b-link",{staticClass:"align-self-center mt-3",on:{click:t.getpassword}},[t._v("忘記密碼？")])],2)],1),o("b-col",{staticClass:"pt-5 pt-lg-0 d-flex flex-column align-items-center",attrs:{cols:"12",lg:"6"}},[o("b-btn",{staticClass:"mb-3",attrs:{variant:"primary"},on:{click:t.fblogin}},[o("b-col",{attrs:{cols:"2"}},[o("font-awesome-icon",{attrs:{icon:["fab","facebook-f"],size:"1x"}})],1),o("b-col",{attrs:{cols:"10"}},[t._v("Login with Facebook")])],1),o("b-btn",{attrs:{variant:"light"}},[o("b-col",{attrs:{cols:"2"}},[o("font-awesome-icon",{attrs:{icon:["fab","google"],size:"1x"}})],1),o("b-col",{attrs:{cols:"10"}},[t._v("Login with Google")])],1)],1)],1),o("div",{staticClass:"footer text-center py-3"},[t._v("Need an account?"),o("b-link",{staticClass:"ml-1",attrs:{to:"/sign"}},[t._v("立即註冊!")])],1)],1),o("vs-popup",{attrs:{title:"忘記密碼",active:t.edit,"button-close-hidden":""},on:{"update:active":function(e){t.edit=e},close:t.bringBack}},[o("b-form",{staticClass:"w-100 text-center",on:{submit:function(e){return e.preventDefault(),t.submitEmail(e)}}},[o("b-form-group",{attrs:{label:"請輸入註冊時的 E-Mail","label-for":"forgot"}},[o("b-form-input",{attrs:{id:"forgot",required:"",type:"email"},model:{value:t.forgot,callback:function(e){t.forgot=e},expression:"forgot"}})],1),o("b-row",{staticClass:"m-0 justify-content-center"},[o("b-button",{staticClass:"mr-1",attrs:{variant:"success",type:"submit"}},[t._v("送出")]),o("b-button",{staticClass:"ml-1",attrs:{variant:"danger"},on:{click:t.cancel}},[t._v("取消")])],1)],1),o("vs-popup",{attrs:{title:"提醒",active:t.edit2,"button-close-hidden":""},on:{"update:active":function(e){t.edit2=e},close:function(e){t.edit=!1}}},[o("h4",[t._v("新的密碼已送出，請登入後立即更改密碼以保護你的隱私")])])],1)],1)},i=[],n=(o("b0c0"),o("96cf"),o("1da1")),r=o("55fc"),a=o.n(r),c={data:function(){return{img:a.a,form:{account:"",password:""},inputs:[{label:"帳號",id:"account",type:"email",placeholder:"請輸入電子郵件"},{label:"密碼",id:"password",type:"password",placeholder:"請輸入密碼"}],edit:!1,edit2:!1,forgot:""}},methods:{submit:function(t){var e=this;t.preventDefault(),this.axios.post("https://yingju.herokuapp.com/login",this.form).then((function(t){var o=t.data;o.success?e.$swal({title:"登入成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}).then((function(t){(t.value||t.isDismissed)&&(e.$store.commit("adduser",[o.result[0].name,o.result[0].account,o.result[0]._id]),e.$router.push("/member/profile"))})):e.$swal({title:o.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}),e.form.account="",e.form.password=""})).catch((function(t){e.$swal({title:t.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))},getpassword:function(){this.edit=!0},cancel:function(){this.edit=!1,this.forgot=""},bringBack:function(){this.forgot=""},submitEmail:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.axios.post("https://yingju.herokuapp.com/send",{email:t.forgot}).then((function(e){e.data.success&&(t.edit2=!0)})).catch((function(e){t.edit=!1,t.$swal({title:e.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}));case 1:case"end":return e.stop()}}),e)})))()},fblogin:function(){var t=this;window.FB.login((function(e){window.FB.api("/me?fields=name,id,email",(function(e){var o={account:e.email,password:e.id,tel:"09"+e.id.substr(0,8),name:e.name,address:"",profileImg:"http://graph.facebook.com/"+e.id+"/picture?type=large"};t.axios.post("https://yingju.herokuapp.com/fblogin",o).then((function(e){var o=e.data;o.success?t.$swal({title:"登入成功",text:"請立即修改詳細聯絡資訊",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}).then((function(e){(e.value||e.isDismissed)&&(t.$store.commit("adduser",[o.result.name,o.result.account,o.result._id]),t.$router.push("/member/profile"))})):t.$swal({title:o.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}),t.form.account="",t.form.password=""})).catch((function(e){t.$swal({title:e.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))}))}),{scope:"email, public_profile",return_scopes:!0})}}},l=c,u=o("2877"),f=Object(u["a"])(l,s,i,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=login.a2501851.js.map