{"version":3,"sources":["webpack:///./src/assets/images/login.jpg","webpack:///./src/views/Login.vue?e10b","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","style","background","img","attrs","staticClass","borderRadius","on","submit","_l","item","index","key","label","id","type","placeholder","model","value","form","callback","$$v","$set","expression","_v","getpassword","fblogin","edit","$event","bringBack","preventDefault","submitEmail","forgot","cancel","edit2","staticRenderFns","data","account","password","inputs","methods","e","axios","post","window","FB","login","api","response","email","tel","substr","name","address","profileImg","scope","return_scopes","component"],"mappings":"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","file":"js/login.a2501851.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/login.05533f09.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({background: (\"url(\" + _vm.img + \") no-repeat fixed center/cover\")}),attrs:{\"id\":\"login\"}},[_c('b-container',{staticClass:\"p-0 mx-1 mx-sm-auto\",style:({background: 'rgba(0,0,0,0.8)',borderRadius: '1rem'})},[_c('b-row',{staticClass:\"align-items-center justify-content-between m-0\"},[_c('b-col',{staticClass:\"pb-5 pb-lg-0 d-flex flex-column align-items-center\",attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('font-awesome-icon',{attrs:{\"icon\":[\"fas\",\"user-circle\"],\"size\":\"4x\",\"color\":\"white\"}}),_c('b-form',{staticClass:\"d-flex flex-column\",on:{\"submit\":_vm.submit}},[_vm._l((_vm.inputs),function(item,index){return _c('b-form-group',{key:index,attrs:{\"label\":item.label,\"label-for\":item.id}},[_c('b-form-input',{attrs:{\"id\":item.id,\"type\":item.type,\"required\":\"\",\"placeholder\":item.placeholder},model:{value:(_vm.form[item.id]),callback:function ($$v) {_vm.$set(_vm.form, item.id, $$v)},expression:\"form[item.id]\"}})],1)}),_c('b-btn',{staticClass:\"mt-3 p-1\",attrs:{\"variant\":\"success\",\"type\":\"submit\"}},[_vm._v(\"登入\")]),_c('b-link',{staticClass:\"align-self-center mt-3\",on:{\"click\":_vm.getpassword}},[_vm._v(\"忘記密碼？\")])],2)],1),_c('b-col',{staticClass:\"pt-5 pt-lg-0 d-flex flex-column align-items-center\",attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('b-btn',{staticClass:\"mb-3\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.fblogin}},[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('font-awesome-icon',{attrs:{\"icon\":[\"fab\",\"facebook-f\"],\"size\":\"1x\"}})],1),_c('b-col',{attrs:{\"cols\":\"10\"}},[_vm._v(\"Login with Facebook\")])],1),_c('b-btn',{attrs:{\"variant\":\"light\"}},[_c('b-col',{attrs:{\"cols\":\"2\"}},[_c('font-awesome-icon',{attrs:{\"icon\":[\"fab\",\"google\"],\"size\":\"1x\"}})],1),_c('b-col',{attrs:{\"cols\":\"10\"}},[_vm._v(\"Login with Google\")])],1)],1)],1),_c('div',{staticClass:\"footer text-center py-3\"},[_vm._v(\"Need an account?\"),_c('b-link',{staticClass:\"ml-1\",attrs:{\"to\":\"/sign\"}},[_vm._v(\"立即註冊!\")])],1)],1),_c('vs-popup',{attrs:{\"title\":\"忘記密碼\",\"active\":_vm.edit,\"button-close-hidden\":\"\"},on:{\"update:active\":function($event){_vm.edit=$event},\"close\":_vm.bringBack}},[_c('b-form',{staticClass:\"w-100 text-center\",on:{\"submit\":function($event){$event.preventDefault();return _vm.submitEmail($event)}}},[_c('b-form-group',{attrs:{\"label\":\"請輸入註冊時的 E-Mail\",\"label-for\":\"forgot\"}},[_c('b-form-input',{attrs:{\"id\":\"forgot\",\"required\":\"\",\"type\":\"email\"},model:{value:(_vm.forgot),callback:function ($$v) {_vm.forgot=$$v},expression:\"forgot\"}})],1),_c('b-row',{staticClass:\"m-0 justify-content-center\"},[_c('b-button',{staticClass:\"mr-1\",attrs:{\"variant\":\"success\",\"type\":\"submit\"}},[_vm._v(\"送出\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"danger\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1),_c('vs-popup',{attrs:{\"title\":\"提醒\",\"active\":_vm.edit2,\"button-close-hidden\":\"\"},on:{\"update:active\":function($event){_vm.edit2=$event},\"close\":function($event){_vm.edit=false}}},[_c('h4',[_vm._v(\"新的密碼已送出，請登入後立即更改密碼以保護你的隱私\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #login(:style=\"{background: `url(${img}) no-repeat fixed center/cover`}\")\n    b-container(:style=\"{background: 'rgba(0,0,0,0.8)',borderRadius: '1rem'}\").p-0.mx-1.mx-sm-auto\n      b-row.align-items-center.justify-content-between.m-0\n        b-col.pb-5.pb-lg-0.d-flex.flex-column.align-items-center(cols=\"12\" lg=\"6\")\n          font-awesome-icon(:icon=['fas','user-circle'] size=\"4x\" color=\"white\")\n          b-form.d-flex.flex-column(@submit=\"submit\")\n            b-form-group(\n              v-for=\"(item,index) in inputs\"\n              :key=\"index\"\n              :label=\"item.label\"\n              :label-for=\"item.id\"\n            )\n              b-form-input(\n                :id=\"item.id\"\n                :type=\"item.type\"\n                required\n                :placeholder=\"item.placeholder\"\n                v-model=\"form[item.id]\"\n              )\n            b-btn(variant=\"success\" type=\"submit\").mt-3.p-1 登入\n            b-link.align-self-center.mt-3(@click=\"getpassword\") 忘記密碼？\n        b-col.pt-5.pt-lg-0(cols=\"12\" lg=\"6\").d-flex.flex-column.align-items-center\n          b-btn(variant=\"primary\" @click=\"fblogin\").mb-3\n            b-col(cols=\"2\")\n              font-awesome-icon(:icon=['fab','facebook-f'] size=\"1x\")\n            b-col(cols=\"10\")\n              | Login with Facebook\n          b-btn(variant=\"light\")\n            b-col(cols=\"2\")\n              font-awesome-icon(:icon=['fab','google'] size=\"1x\")\n            b-col(cols=\"10\")\n              | Login with Google\n      .footer.text-center.py-3\n        | Need an account?\n        b-link(to=\"/sign\").ml-1 立即註冊!\n    vs-popup(title=\"忘記密碼\" :active.sync='edit' button-close-hidden=true @close=\"bringBack\")\n      b-form(@submit.prevent=\"submitEmail\").w-100.text-center\n        b-form-group(\n          label=\"請輸入註冊時的 E-Mail\"\n          label-for=\"forgot\"\n        )\n          b-form-input(\n            id=\"forgot\"\n            v-model=\"forgot\"\n            required\n            type=\"email\"\n          )\n        b-row.m-0.justify-content-center\n          b-button(variant=\"success\" type=\"submit\").mr-1 送出\n          b-button(variant=\"danger\" @click=\"cancel\").ml-1 取消\n      vs-popup(title=\"提醒\" :active.sync='edit2' button-close-hidden=true @close=\"edit=false\")\n        h4 新的密碼已送出，請登入後立即更改密碼以保護你的隱私\n</template>\n\n<script>\nimport img from '../assets/images/login.jpg'\nexport default {\n  data () {\n    return {\n      img: img,\n      form: {\n        account: '',\n        password: ''\n      },\n      inputs: [\n        {\n          label: '帳號', id: 'account', type: 'email', placeholder: '請輸入電子郵件'\n        },\n        {\n          label: '密碼', id: 'password', type: 'password', placeholder: '請輸入密碼'\n        }\n      ],\n      edit: false,\n      edit2: false,\n      forgot: ''\n    }\n  },\n  methods: {\n    submit (e) {\n      e.preventDefault()\n      this.axios.post(process.env.VUE_APP_APIURL + '/login', this.form)\n        .then(response => {\n          const data = response.data\n          if (data.success) {\n            this.$swal({\n              title: '登入成功',\n              icon: 'success',\n              confirmButtonColor: '#3085d6',\n              confirmButtonText: '確定'\n            }).then(result => {\n              if (result.value || result.isDismissed) {\n                this.$store.commit('adduser', [data.result[0].name, data.result[0].account, data.result[0]._id])\n                this.$router.push('/member/profile')\n              }\n            })\n          } else {\n            this.$swal({\n              title: data.message,\n              icon: 'error',\n              confirmButtonColor: '#3085d6',\n              confirmButtonText: '確定'\n            })\n          }\n          this.form.account = ''\n          this.form.password = ''\n        })\n        .catch(error => {\n          this.$swal({\n            title: error.response.data.message,\n            icon: 'error',\n            confirmButtonColor: '#3085d6',\n            confirmButtonText: '確定'\n          })\n        })\n    },\n    getpassword () {\n      this.edit = true\n    },\n    cancel () {\n      this.edit = false\n      this.forgot = ''\n    },\n    bringBack () {\n      this.forgot = ''\n    },\n    async submitEmail () {\n      this.axios.post(process.env.VUE_APP_APIURL + '/send', { email: this.forgot })\n        .then(response => {\n          if (response.data.success) {\n            this.edit2 = true\n          }\n        })\n        .catch(error => {\n          this.edit = false\n          this.$swal({\n            title: error.response.data.message,\n            icon: 'error',\n            confirmButtonColor: '#3085d6',\n            confirmButtonText: '確定'\n          })\n        })\n    },\n    fblogin () {\n      window.FB.login(response => {\n        window.FB.api('/me?fields=name,id,email', response => {\n          const fbform = {\n            account: response.email,\n            password: response.id,\n            tel: '09' + response.id.substr(0, 8),\n            name: response.name,\n            address: '',\n            profileImg: 'http://graph.facebook.com/' + response.id + '/picture?type=large'\n          }\n          this.axios.post(process.env.VUE_APP_APIURL + '/fblogin', fbform)\n            .then(response => {\n              const data = response.data\n              if (data.success) {\n                this.$swal({\n                  title: '登入成功',\n                  text: '請立即修改詳細聯絡資訊',\n                  icon: 'success',\n                  confirmButtonColor: '#3085d6',\n                  confirmButtonText: '確定'\n                }).then(result => {\n                  if (result.value || result.isDismissed) {\n                    this.$store.commit('adduser', [data.result.name, data.result.account, data.result._id])\n                    this.$router.push('/member/profile')\n                  }\n                })\n              } else {\n                this.$swal({\n                  title: data.message,\n                  icon: 'error',\n                  confirmButtonColor: '#3085d6',\n                  confirmButtonText: '確定'\n                })\n              }\n              this.form.account = ''\n              this.form.password = ''\n            })\n            .catch(error => {\n              this.$swal({\n                title: error.response.data.message,\n                icon: 'error',\n                confirmButtonColor: '#3085d6',\n                confirmButtonText: '確定'\n              })\n            })\n        })\n      }, {\n        scope: 'email, public_profile',\n        return_scopes: true\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=2d005fa6&lang=pug&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}