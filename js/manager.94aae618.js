(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manager"],{1692:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"manager"}},[i("Sidebar",{attrs:{visible:t.visible,fullwidth:t.fullwidth},on:{sidebarclose:t.sidebarclose}}),i("b-container",{staticClass:"p-0",attrs:{fluid:""}},[i("b-row",{staticClass:"m-0"},[i("b-col",{staticClass:"p-0",style:{flex:t.sidebarwidth}}),i("b-col",{staticClass:"p-0"},[i("Navbar",{attrs:{visible:t.visible},on:{changesidebar:t.changesidebar,showContent:function(e){return t.$emit("showContent")}}}),i("router-view")],1)],1)],1)],1)},n=[],o=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-sidebar",{attrs:{id:"sidebar",shadow:"","no-header":"",visible:t.visible,"no-close-on-route-change":"",backdrop:t.backdrop},on:{hidden:function(e){return t.$emit("sidebarclose")}}},[i("b-avatar",{attrs:{size:"100px",src:t.img,to:"/member/profile"}}),t._l(t.sidebarItems,(function(e,s){return i("div",{staticClass:"sidebar-item",on:{click:function(i){return t.itemclick(e.link)}}},[i("vs-icon",{staticClass:"mx-5",attrs:{icon:e.icon,size:"2rem"}}),t._v(t._s(e.text))],1)})),i("div",{staticClass:"sidebar-item2"},[i("vs-icon",{staticClass:"mx-5",attrs:{icon:t.sidebarItems2[0].icon,size:"2rem"}}),t._v(t._s(t.sidebarItems2[0].text))],1),i("div",{staticClass:"sidebar-item2",on:{click:t.logout}},[i("vs-icon",{staticClass:"mx-5",attrs:{icon:t.sidebarItems2[1].icon,size:"2rem"}}),t._v(t._s(t.sidebarItems2[1].text))],1)],2)}),a=[],r=i("9d64"),c=i.n(r),l={props:{visible:Boolean,fullwidth:Number},data:function(){return{sidebarItems:[{icon:"shopping_cart",text:"訂單管理",link:"/manager/order"},{icon:"ballot",text:"商品管理",link:"/manager/display"},{icon:"comment",text:"發文管理",link:"/manager/article"},{icon:"supervisor_account",text:"會員管理",link:"/manager/membership"},{icon:"equalizer",text:"最新消息",link:"/manager/message"}],sidebarItems2:[{icon:"help",text:"幫助中心"},{icon:"exit_to_app",text:"登出"}],img:c.a}},computed:{backdrop:function(){return this.fullwidth<992}},methods:{logout:function(){var t=this;this.axios.delete("https://yingju.herokuapp.com/logout").then((function(e){var i=e.data;i.success?t.$swal({title:"登出成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}).then((function(e){(e.value||e.isDismissed)&&(t.$store.commit("logout"),t.$router.push("/"))})):t.$swal({title:i.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})})).catch((function(e){t.$swal({title:e.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))},itemclick:function(t){this.$router.push(t),this.backdrop&&this.$emit("sidebarclose")}}},u=l,d=i("2877"),m=Object(d["a"])(u,o,a,!1,null,null,null),h=m.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-navbar",{staticClass:"py-0",attrs:{toggleable:"lg",type:"dark",variant:"dark",sticky:""}},[i("b-navbar-brand",{staticClass:"ml-auto",on:{click:function(e){return t.$emit("showContent")}}},[t._v("回首頁")]),i("b-navbar-toggle",{staticClass:"ml-auto",style:{margin:"14px 0 14px 0"},attrs:{target:""},on:{click:function(e){return t.$emit("changesidebar")}},scopedSlots:t._u([{key:"default",fn:function(e){e.expanded;return[t.visible?i("b-icon",{attrs:{icon:"X"}}):i("b-icon",{attrs:{icon:"List"}})]}}])}),i("b-collapse",{staticClass:"flex-grow-0",attrs:{"is-nav":""}},[i("b-navbar-nav",{staticClass:"d-flex align-items-center"},[i("b-nav-item",[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"help",size:"1.5rem"}}),t._v("幫助")],1),i("b-nav-item",{on:{blur:t.hidden}},[i("vs-avatar",{style:{background:"transparent"},attrs:{id:"popover",icon:"notifications",badge:t.alert,size:"1.5rem"}}),i("b-popover",{attrs:{target:"popover",placement:"bottom",triggers:"click"},on:{shown:t.shown},scopedSlots:t._u([{key:"default",fn:function(){return[t.popovers.length>0?i("ul",{staticClass:"mb-0",style:{cursor:"pointer"},on:{click:t.route}},t._l(t.popovers,(function(e,s){return i("li",[t._v("有一則來自"),i("span",{staticClass:"text-info"},[t._v(t._s(e.name))]),t._v("的訊息"),i("span",{staticClass:"text-secondary ml-3"},[t._v(t._s(e.content))])])})),0):i("p",{staticClass:"mb-0"},[t._v("目前沒有任何新消息")])]},proxy:!0}])})],1),i("b-nav-item",{on:{click:t.logout}},[i("vs-icon",{staticClass:"mr-2",attrs:{icon:"exit_to_app",size:"1.5rem"}}),t._v("登出")],1),i("b-nav-item",[t._v(t._s(t.username)+" 你好")])],1)],1)],1)},p=[],b=(i("4de4"),i("b85c")),v={props:{visible:Boolean},data:function(){return{alert:0,popovers:""}},methods:{shown:function(){this.alert=0,this.popovers.length>0&&this.axios.patch("https://yingju.herokuapp.com/message")},hidden:function(){this.$root.$emit("bv::hide::popover")},route:function(){this.$router.push("/manager/message")},logout:function(){var t=this;window.FB.getLoginStatus((function(e){"connected"===e.status&&window.FB.logout((function(t){console.log(t)})),t.axios.delete("https://yingju.herokuapp.com/logout").then((function(e){var i=e.data;i.success?(t.$store.commit("logout"),t.$swal({title:"登出成功",icon:"success",confirmButtonColor:"#3085d6",confirmButtonText:"確定"}).then((function(e){(e.value||e.isDismissed)&&t.$router.push("/")}))):t.$swal({title:i.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})})).catch((function(e){t.$swal({title:e.response.data.message,icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"確定"})}))}))}},computed:{username:function(){return this.$store.getters.username}},mounted:function(){var t=this;this.axios.get("https://yingju.herokuapp.com/message").then((function(e){t.alert=e.data.result.filter((function(t){return!1===t.checked})).length;var i,s=e.data.result.filter((function(t){return!1===t.checked})),n=Object(b["a"])(s);try{for(n.s();!(i=n.n()).done;){var o=i.value,a=o.time=parseInt((Date.now()-o.time)/1e3);o.content=a<60?"剛剛":a>=60&&a<3600?Math.floor(a/60)+"分鐘前":a>=3600&&a<86400?Math.floor(a/3600)+"小時前":a>=86400&&a<2592e3?Math.floor(a/86400)+"天前":a>=2592e3&&a<31104e3?Math.floor(a/2592e3)+"個月前":"超過一個月前"}}catch(r){n.e(r)}finally{n.f()}t.popovers=s})).catch((function(e){t.$vs.notify({title:e.response.data.message,color:"danger",icon:"close"})}))}},g=v,w=Object(d["a"])(g,f,p,!1,null,null,null),x=w.exports,_={components:{Sidebar:h,Navbar:x},data:function(){return{visible:!1}},props:{fullwidth:Number},methods:{changesidebar:function(){this.visible=!this.visible},sidebarclose:function(){this.visible=!1}},watch:{fullwidth:function(){this.visible=this.fullwidth>=992}},mounted:function(){this.visible=this.fullwidth>=992},computed:{sidebarwidth:function(){return this.fullwidth>=992?"0 0 320px":"0 0 0"}}},k=_,C=Object(d["a"])(k,s,n,!1,null,null,null);e["default"]=C.exports},"4de4":function(t,e,i){"use strict";var s=i("23e7"),n=i("b727").filter,o=i("1dde"),a=i("ae40"),r=o("filter"),c=a("filter");s({target:"Array",proto:!0,forced:!r||!c},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=manager.94aae618.js.map